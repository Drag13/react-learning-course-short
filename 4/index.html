<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>React For Beginners - Detecting changes</title><link rel="stylesheet" href="https://drag13.io/react-learning-course-short/0/index.1568b79b.css"><link rel="stylesheet" href="https://drag13.io/react-learning-course-short/0/index.698ea738.css"><link rel="stylesheet" href="https://drag13.io/react-learning-course-short/0/index.22ba7868.css"><link rel="stylesheet" href="https://drag13.io/react-learning-course-short/0/index.8cd0a27f.css"></head><body> <div class="reveal"> <div class="slides"> <section> <h1>Free React course for Beginners</h1> </section> <section> <h1> L4 - Detecting changes </h1> <h4> <u> React For Beginners by Itera </u> </h4> </section> <section> <section> <h2>What is change detection</h2> </section> <section> <p>Change detection - mechanism that tracks data changes and notifies appropriate listeners</p> </section> <section> <p>As an example - look on the <i>BtnWithCounter</i>:</p> <div class="fade-up fragment" data-fragment-index="0">state = {counter: 0}</div> <div class="fade-up fragment" data-fragment-index="1">â¬‡ï¸</div> <div class="fade-up fragment" data-fragment-index="1"> Clicked 0 times</div> <div class="fade-up fragment" data-fragment-index="2">ğŸ–±ï¸ Click</div> <div class="fade-up fragment" data-fragment-index="3">â¬‡ï¸</div> <div class="fade-up fragment" data-fragment-index="3">setState({counter:1})</div> <div class="fade-up fragment" data-fragment-index="4">â¬‡ï¸</div> <div class="fade-up fragment" data-fragment-index="4"> Clicked 1 times </div> </section> <section> <p>It looks very simple from the first sight but imagine:</p> <ul> <li class="fade-up fragment">Rich data</li> <li class="fade-up fragment">Rich user interaction</li> <li class="fade-up fragment">Backend interaction</li> </ul> <p class="fade-up fragment">ğŸ¤¯ğŸ¤¯ğŸ¤¯</p> </section> </section> <section> <h2>Two ways to track changes</h2> </section> <section> <section> <h2> Implicit change detection strategy </h2> </section> <section> <h4>Angular way</h4> <pre>
            <code data-line-numbers="">class CalculatorService {
    income: number;
    setIncome(newIncome){
        this.income = newIncome;
    }
}
</code>
</pre> <pre>
    <code data-line-numbers=""><div>{{income}}</div></code>
        </pre> </section> <section> <h4> No special actions to inform framework that data changes </h4> </section> <section class="left"> <p>In Angular this works because of <a href="https://angular.io/api/core/NgZone" target="_blank" rel="noopener noreferrer">NgZone</a> and patching all DOM events </p> <p>Whenever something happens - click, network, input - Angular starts checking changes</p> </section> </section> <section> <section> <h2>React uses another way - explicit</h2> </section> <section class="left"> <p>With explicit way you have to somehow notify framework that data changes</p> <p>Usually this achieved with using special methods</p> </section> <section> <h4>For class based components - setState</h4> <pre><code data-line-numbers="">setState({})</code></pre> </section> <section> <h4>For functional components - <a href="https://reactjs.org/docs/hooks-state.html">useState</a> hook</h4> <pre><code data-line-numbers="">const [counter, setCounter] = useState({});
setCounter(1);
        </code></pre> </section> <section> <h4>Ok, we notified react that data changed. What next?</h4> </section> <section> <ul> <li>After the notification React will recalculate all components which <ul> <li class="fade-up fragment">changed props</li> <li class="fade-up fragment">changed state</li> <li class="fade-up fragment">all child functional components for p.1 and p2</li> </ul> </li> <li class="fade-up fragment">Build new Virtual DOM based on the results</li> <li class="fade-up fragment">Find the diff</li> <li class="fade-up fragment">Updates real DOM to match new Virtual DOM</li> </ul> </section> </section> <section> <section> <h2>Typical mistakes</h2> </section> <section> <h4> ğŸ’” Ignoring state when <strong>data is subject to change</strong> </h4> <pre><code data-line-numbers="">const data = { counter: 0 };
const MyBtn = () =&gt; {
    return &lt;button onClick={() =&gt; (data.counter += 1)}&gt;
        {data.counter}
    &lt;/button&gt;;
};
            </code></pre> </section> <section> <h4>ğŸ’” Mutating state directly, without special methods</h4> <pre><code data-line-numbers="">const MyBtn = () =&gt; {
    const [data] = useState({ counter: 0 });
    return &lt;button onClick={() =&gt; (data.counter += 1)}&gt;
        {data.counter}
    &lt;/button&gt;;
};
          </code></pre> </section> <section> <h4>ğŸ’” Also applicable for Class based components</h4> <pre><code data-line-numbers="">class MyBtn extends Component {
state = { counter: 0 };
render() {
    return (
        &lt;button onClick={() =&gt; (this.state.counter += 1)}&gt;
            {this.state.counter}
        &lt;/button&gt;
    );}
}
          </code></pre> </section> <section> <h4>If you data is supposed to change - use state and don't mutate it directly</h4> <ul> <li>setState for class components</li> <li>useSate for functional components</li> </ul> </section> </section> <section> <h2>Useful links</h2> <ul> <li> <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-state.html">Using the State Hook</a> </li> <li> <a target="_blank" rel="noopener noreferrer" href="https://morioh.com/p/caccd1b76c5c">Angular vs React - Change detection</a> </li> </ul> </section> </div> </div> <script src="https://drag13.io/react-learning-course-short/0/index.9b139d60.js" type="module"></script> </body></html>